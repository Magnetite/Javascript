<!DOCTYPE html>

<html>
<head>
<title>Game 15 </title>
<style>
body {
background-color: black;
color: green;
font-size: 20px;
font-family: "Lucida Console";
}

#game15{
	height: 20em;
	width: 20em;
}

.drg{
position: relative;
float: right;
	height: 5em;
	width: 5em;
	border-radius: 100%;
	z-index: 1;
	background-color: orange;
	text-align: center;
	draggable: true;
	
}


</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

    <script>
	var fourSqr = [11,14];
	
	function ani(id){
		var d = '#d';  //part of id
		var em = '+=5em';
			$(d + grid[id]).click(function(){ 
			
				if (mov[id] === 1){
				
					$(d + grid[id]).animate({left: em}); //Go right
					
				} else if (mov[id] === 2){
				
					$(d + grid[id]).animate({right: em}); //Go left
					
				} else if (mov[id] === 3){
				
					$(d + grid[id]).animate({top: em}); //Go down
					
				} else if (mov[id] !== 0) {
				
					$(d + grid[id]).animate({bottom: em}); //Go up
				}
				
				if (mov[id] !== 0){
					valueSwap(id, arr);
				}
			});
			
			
			}
			
	//a is the value to swap with 0, arr is the array
	function valueSwap(a, arr){
		
		//var oldVal = arr.indexOf(a);
		var oldZero = arr.indexOf(0);
		var oldV = arr[a];
		arr[a] = 0;
		arr[oldZero] = oldV;
		
		//console.log(fourSqr.join());
		eventHandle(a); 
		
		
	}
	
	//sets up event handlers
	function eventHandle(zeroInd){
		
		
		mov.forEach(function(cur, ind, arr){ arr[ind] = 0; });  //<= clears the move codes in mov array
		
		
		if ( (zeroInd % squareSide) !== 3 ){
			//ani( (zeroInd + 1), grid, 1 );
			mov[zeroInd + 1] = 1;
		} 
		
		if ( (zeroInd % squareSide) !== 0 ){
			//ani( (zeroInd - 1), grid, 2 );
			mov[zeroInd - 1] = 2;
		} 
		
		
		if ( (zeroInd - squareSide) >= 0 ){
			//ani( (zeroInd - squareSide), grid, 3 );
			mov[zeroInd - squareSide] = 3;
		} 
		
		if ( (zeroInd + squareSide) <= grid.length ){
			//ani( (zeroInd + squareSide), grid, 7 );
			mov[zeroInd + squareSide] = 0;
		} 
		
		
		
	}
	
	
			//globals
			var grid = [];
			var mov = [];
			var squareSide = 4;
			
      $(document).ready(function() {
        //var ids = [11,14]; //Default 
		
		
		for (var i = 1; i < 16; i++){
			//ids.push("#d" + i);
			grid.push(i);  
			mov.push(0);
		}
		grid.push(0);
		mov.push(0);
		
		
		ani(fourSqr[0], grid, 3);
		ani(fourSqr[1], grid, 2);
		
         
       });  
    </script>

</head>
<body>

<div id="game15">
	<div id="d1" class="drg">1</div>
	<div id="d2" class="drg">2</div>
	<div id="d3" class="drg">3</div>
	
	<div id="d4" class="drg" >4</div>
	<div id="d5" class="drg" >5</div>
	<div id="d6" class="drg">6</div>
	
	<div id="d7" class="drg">7</div>
	<div id="d8" class="drg">8</div>
	<div id="d9" class="drg">9</div>
	
	<div id="d10" class="drg">10</div>
	<div id="d11" class="drg">11</div>
	<div id="d12" class="drg">12</div>
	
	<div id="d13" class="drg">13</div>
	<div id="d14" class="drg">14</div>
	<div id="d15" class="drg">15</div>
	
	
	

</div>


</body>
</html>