<!DOCTYPE html>

<html>
<head>
<title>Game 15 Static Div Version</title>
<style>
body {
background-color: black;
color: green;
font-size: 20px;
font-family: "Lucida Console";
}

#game15{
	height: 20em;
	width: 20em;
}

.drg{
position: relative;
float: right;
	height: 5em;
	width: 5em;
	border-radius: 100%;
	z-index: 1;
	background-color: orange;
	text-align: center;
	
}

.zero {

	visibility: 0;
	color: black;
}


</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

    <script>
	
	function assign(t){
		var d = '#d';
		var tmp;
		
		grid.forEach(function(cur, ind, ar){ 
					tmp = ind + 1;
					$(d + tmp ).text(ar[ind]);
				});
	
		
		
	}
			
			
	//a is the value to swap with 0, arr is the array
	function valueSwap(a, arr){
		
		//var oldVal = arr.indexOf(a);
		var oldZero = arr.indexOf(0);
		var oldV = arr[a];
		arr[a] = 0;
		arr[oldZero] = oldV;
		
		
		
		assign(a); 
		eventHandle(a);
		
		
	}
	
	//sets up event handlers
	function eventHandle(zeroInd){
		var d = '#d';
		var em = '+=5em';
		var tmp;
		
		//make sure all divs are clear of event handlers
		$('div').off("click");
		
		//Check if there is a square to the left
		if ( (zeroInd % squareSide) !== 3 ){
			tmp = zeroInd + 2;
			$(d + (tmp)).click(function(){  valueSwap( (tmp - 1), grid);  });
		} 
		
		//check if there is a square to right
		if ( (zeroInd % squareSide) !== 0 ){
			tmp = zeroInd;
			$(d + (tmp)).click(function(){  valueSwap( (tmp - 1), grid);  });
		} 
		
		//check if there is a square above
		if ( (zeroInd - squareSide) >= 0 ){
			tmp = zeroInd - squareSide + 1;
			$(d + tmp).click(function(){  valueSwap( (tmp - 1), grid);  });
		} 
		
		//check if there is a square down
		if ( (zeroInd + squareSide) < grid.length ){
			tmp = zeroInd + squareSide + 1;
			$(d + (tmp)).click(function(){  valueSwap( (tmp -1), grid);  });
		} 
		
		
		
	}
	
	
			//globals
			var grid = [];
			var squareSide = 4;
		
      $(document).ready(function() {
		
		
		for (var i = 1; i < 16; i++){
			
			grid.push(i);  
		}
		grid.push(0);
		
		
		eventHandle(15);
         
       });  
	   
    </script>

</head>
<body>

<div id="game15">
	<div id="d1" class="drg">1</div>
	<div id="d2" class="drg">2</div>
	<div id="d3" class="drg">3</div>
	
	<div id="d4" class="drg" >4</div>
	<div id="d5" class="drg" >5</div>
	<div id="d6" class="drg">6</div>
	
	<div id="d7" class="drg">7</div>
	<div id="d8" class="drg">8</div>
	<div id="d9" class="drg">9</div>
	
	<div id="d10" class="drg">10</div>
	<div id="d11" class="drg">11</div>
	<div id="d12" class="drg">12</div>
	
	<div id="d13" class="drg">13</div>
	<div id="d14" class="drg">14</div>
	<div id="d15" class="drg">15</div>
	<div id="d16" class="drg">16</div>
	
	
	

</div>


</body>
</html>