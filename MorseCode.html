<!DOCTYPE html>
<html>
<head>

	<title>Morse Code practice</title>

	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	
	<style>
	
	
	.codeKey{
		
		width: 76px;
		height: 76px;
		border-radius: 100%;
		background-color: red;
		
		border: 3px solid black;
		
		color: white;
		text-align: center;
		padding: 0,30,0,30;
		font-size: 36;
		font-weight: bold;
		
	}
	
	.bigTxt{
		font-size: 40px;
		font-weight: bold;
	}
	
	</style>

</head>
<body>

<pre id="morse_code" class="panel panel-default bigTxt"></pre>

<div id="translation" class="panel panel-default"></div>

<hr>

<div id="codeKey" class="btn codeKey">Code Key</div>

<div id="clear" class="btn btn-default ">Clear</div>


<script>

let start, end, spaces;
var code_out = "", chars_out = "";

sec = () => {
	let t = new Date();
	
	return t.getTime();
	
}

//Compare a and b, and output a "." or a "-"
compare = (a,b, m) => {

	let n = new Date();
	let lastT = n.getTime() - end;
	
	if (m === 1 && lastT > 1000 ){
		return "     ";
	} else if (m === 1 && lastT > 400){
		return  " ";
	}else if (m === 1){
		return "";
	}
	
	let tst = b - a;
	
	if (tst > 250){
		return "-";
	} 
	
	return ".";
	
}



$("#codeKey").mousedown( () => {
	start = sec();
	
	code_out += compare(start, end, 1);
});

$("#codeKey").mouseup( () => {
	end = sec();
	
	code_out += compare(start, end, 0);
	$("#morse_code").text(code_out);
	
});

$("#clear").click( () => {
	$("#morse_code").text("");
	code_out = "";
});





	
</script>

</body>
</html>